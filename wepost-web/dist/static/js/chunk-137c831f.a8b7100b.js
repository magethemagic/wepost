(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-137c831f"],{"4a39":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"user-profile "},[r("div",{staticClass:"container"},[r("b-jumbotron",{staticClass:"text-left mb-3 h-user rounded",style:"background-image:url('"+t.userinfo.avatar+"') ",attrs:{lead:t.userinfo.follower_count+"Follower    "+t.userinfo.followed_count+"Following"},scopedSlots:t._u([{key:"header",fn:function(){return[r("div",[r("p",[t._v(t._s(t.userinfo.username))]),r("div",{staticClass:"d-flex"},[r("b-avatar",{staticClass:"mr-3",attrs:{src:t.userinfo.avatar,size:"4rem"}}),r("p",[t._v(t._s(t.userinfo.desc))])],1)])]},proxy:!0}])},[r("b-button",{staticClass:"ml-auto pl-5 pr-5",attrs:{variant:"Follow"===t.followinfo?"primary":""},on:{click:function(e){return e.preventDefault(),t.followUser(e)}}},[t._v(t._s(t.followinfo)+" ")])],1),r("b-row",[r("b-col",{staticClass:"col col-xl-3 order-xl-2 col-lg-6 order-lg-2 col-md-6 col-sm-6 col-12"},[r("p",[t._v("相似的用户：")]),t._l(t.familiar_user,(function(e){return r("b-list-group",{key:e.uid},[r("b-list-group-item",{staticClass:"d-flex align-items-center",attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.viewUser(e.uid)}}},[r("b-avatar",{staticClass:"mr-3",attrs:{src:e.avatar}}),r("span",{staticClass:"mr-auto"},[t._v(t._s(e.username))])],1)],1)}))],2),r("b-col",{staticClass:"col col-xl-8 order-xl-1 col-lg-12 order-lg-1 col-md-12 col-sm-12 col-12"},[r("user-post",{attrs:{params:t.params}})],1)],1)],1)])},o=[],i=r("b53b"),s=r("f8c8"),l={name:"UserProfile",inject:["reload"],components:{"user-post":i["a"]},data:function(){return{params:{},userinfo:{},followinfo:"Follow",familiar_user:[]}},created:function(){this.params={uid:this.$route.query.uid},this.getUserProfile(this.$route.query.uid),this.getFollowstatus(this.$route.query.uid),this.getFamiliarUser(this.$route.query.uid)},methods:{getUserProfile:function(t){var e=this;s["a"].getUserDetail({uid:t}).then((function(t){e.userinfo=t.data})).catch((function(t){alert(t.data)}))},getFollowstatus:function(t){var e=this;this.$axios.get("profile/"+t+"/isfollow").then((function(t){console.log(t.data),1===t.data.code?e.followinfo="Unfollow":-1===t.data.code?e.followinfo="Follow":e.userinfo=""}))},followUser:function(){var t=this.$route.query.uid,e=this,r=new FormData;r.append("action",this.followinfo.toLowerCase()),this.$axios.post("profile/"+t+"/follow",r).then((function(t){e.userinfo.follower_count=t.data.followers_count,"Follow"===e.followinfo?e.followinfo="Unfollow":e.followinfo="Follow"}),(function(t){alert(t.data.detail)}))},getFamiliarUser:function(t){var e=this;this.$axios.get("profile/"+t+"/familiar").then((function(t){console.log(t.data),e.familiar_user=t.data}),(function(t){alert(t.data)}))},viewUser:function(t){this.reload(),this.$router.push({name:"Profile",query:{uid:t}})}}},n=l,u=(r("4e39"),r("2877")),c=Object(u["a"])(n,a,o,!1,null,"4a3d347a",null);e["default"]=c.exports},"4e39":function(t,e,r){"use strict";var a=r("bee3"),o=r.n(a);o.a},b53b:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"base-list"},[t.articleList.length>0?r("div",[r("transition-group",{attrs:{appear:"",tag:"ul"}},t._l(t.articleList,(function(t){return r("post-list",{key:t.id,attrs:{article:t}})})),1),r("b-button",{staticClass:"infinite-scroll",attrs:{variant:"primary",disabled:!t.required},on:{click:t.loadArticle}},[r("b-spinner",{directives:[{name:"show",rawName:"v-show",value:t.required,expression:"required"}],attrs:{type:"border",small:""}}),r("span",{staticClass:"infinite-scroll-text"},[t._v(t._s(t.tips))])],1)],1):r("div",[r("p",[t._v("Nothing here")])])])},o=[],i=(r("99af"),r("96cf"),r("1da1")),s=r("f783"),l=r("f8c8"),n={name:"BaseArticleList",components:{"post-list":s["a"]},props:["params"],data:function(){return{page:1,required:!0,tips:"点我加载更多",articleList:[]}},created:function(){this.loadArticle()},methods:{loadArticle:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,a=t.params,a.page=t.page,e.next=5,l["a"].getArticleList(a).then((function(t){t.data.next||(r.required=!1,r.tips="没有更多了!"),r.articleList=r.articleList.concat(t.data.results),r.page+=1}),(function(t){404===t.status?(r.required=!1,r.tips="没有更多了!"):alert(t.data.detail)}));case 5:case"end":return e.stop()}}),e)})))()}}},u=n,c=r("2877"),f=Object(c["a"])(u,a,o,!1,null,"69440fe4",null);e["a"]=f.exports},bee3:function(t,e,r){}}]);
//# sourceMappingURL=chunk-137c831f.a8b7100b.js.map